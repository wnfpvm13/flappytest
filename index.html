<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABCDEFG</title>
    <style>
        /* CSS ì‹œì‘ */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #333; 
            overflow: hidden; 
            font-family: Arial, sans-serif;
            user-select: none; /* ë“œë˜ê·¸ ë°©ì§€ */
        }

        #game-container {
            width: 320px; 
            height: 480px; 
            border: 3px solid #000;
            position: relative;
            overflow: hidden;
            background-color: #70c5ce; /* ê¸°ë³¸ í•˜ëŠ˜ìƒ‰ ë°°ê²½ */
            /* ğŸ–¼ï¸ ì—¬ê¸°ì— ë°°ê²½ ì´ë¯¸ì§€ ì¶”ê°€ ê°€ëŠ¥ */
        }

        /* ğŸ‘§ ìºë¦­í„° ìŠ¤íƒ€ì¼ */
        #character {
            width: 30px;
            height: 30px;
            position: absolute;
            left: 50px; 
            background-color: purple; /* âš ï¸ í˜„ì¬ëŠ” ì„ì‹œ ë³´ë¼ìƒ‰ ë°•ìŠ¤ì…ë‹ˆë‹¤. */
            border-radius: 5px; 
            transition: transform 0.05s ease-out; /* íšŒì „ ì• ë‹ˆë©”ì´ì…˜ */
        }
        
        /* âš ï¸ ìºë¦­í„° ì´ë¯¸ì§€ ì ìš© íŒ: 
           ì—…ë¡œë“œí•˜ì‹  'image_c36869.png' íŒŒì¼ì„ ê°™ì€ í´ë”ì— ë„£ê³ ,
           ì•„ë˜ ì£¼ì„ì„ í•´ì œí•˜ê³  ê²½ë¡œë¥¼ ì§€ì •í•˜ë©´ ë©ë‹ˆë‹¤.
        */
        
        #character {
            background-image: url('1761659998.jpeg'); 
            background-size: cover;
            background-color: transparent;
            border-radius: 0;
        }
    


        /* ğŸ—ï¸ íŒŒì´í”„ ìŠ¤íƒ€ì¼ */
        .pipe {
            position: absolute;
            width: 50px;
            background-color: #74bf2e; 
            border: 2px solid #50802c;
        }

        .pipe::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 10px;
            background-color: #50802c;
            border-top: 3px solid #74bf2e;
        }

        .top-pipe {
            top: 0;
        }
        .top-pipe::before {
            bottom: -10px;
        }

        .bottom-pipe {
            bottom: 0;
        }
        .bottom-pipe::before {
            top: -10px;
        }

        /* ğŸ† ì ìˆ˜ ìŠ¤íƒ€ì¼ */
        #score {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 40px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px #000;
            z-index: 10;
        }

        /* ğŸ’€ ê²Œì„ ì˜¤ë²„ ìŠ¤íƒ€ì¼ */
        #game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px #000;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            display: none; 
            z-index: 20;
        }

        #game-over button {
            margin-top: 15px;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #fff;
            color: #000;
        }
        /* CSS ë */
    </style>
</head>
<body>
    <div id="game-container">
        <div id="score">0</div>
        
        <div id="character"></div>
        
        <div id="game-over">
            GAME OVER<br>
            <span id="final-score"></span><br>
            <button onclick="window.location.reload()">ë‹¤ì‹œ ì‹œì‘</button>
        </div>
    </div>
    
    <script>
        // JavaScript ì‹œì‘
        const gameContainer = document.getElementById('game-container');
        const character = document.getElementById('character');
        const scoreDisplay = document.getElementById('score');
        const gameOverScreen = document.getElementById('game-over');
        const finalScoreDisplay = document.getElementById('final-score');

        // ê²Œì„ ì„¤ì •ê°’
        const GRAVITY = 0.5; 
        const JUMP_FORCE = -8.5; // ì í”„ í˜ì„ ì•½ê°„ ì¤„ì—¬ì„œ ë‚œì´ë„ ì¡°ì ˆ
        const PIPE_SPEED = 4; 
        const PIPE_GAP = 128; 
        const PIPE_INTERVAL = 1400; // íŒŒì´í”„ ìƒì„± ê°„ê²©ì„ ì•½ê°„ ëŠ˜ë¦¼

        // ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        let charY = 240; 
        let charVelocity = 0; 
        let isGameOver = false;
        let score = 0;
        let gameLoopInterval;
        let pipeGenerationInterval;

        /** ìºë¦­í„°ë¥¼ ì í”„ì‹œí‚¤ëŠ” í•¨ìˆ˜ */
        function jump() {
            if (isGameOver) return;
            charVelocity = JUMP_FORCE; 
        }

        /** ê²Œì„ ë£¨í”„ (í”„ë ˆì„ë§ˆë‹¤ ì‹¤í–‰) */
        function gameLoop() {
            if (isGameOver) return;

            // 1. ì¤‘ë ¥ ì ìš©
            charVelocity += GRAVITY;
            charY += charVelocity;

            // 2. ìºë¦­í„° íšŒì „ ì ìš© (ìœ„ë¡œ ê°ˆ ë•Œ -20ë„, ì•„ë˜ë¡œ ê°ˆ ë•Œ 45ë„)
            const rotation = Math.min(45, charVelocity * 3);
            character.style.transform = `translateY(${charY}px) rotate(${rotation}deg)`;
            
            // 3. ë°”ë‹¥/ì²œì¥ ì¶©ëŒ ê°ì§€
            const containerHeight = gameContainer.clientHeight;
            const charHeight = character.clientHeight;

            if (charY < 0 || charY + charHeight > containerHeight) {
                gameOver();
                return;
            }
            
            // 4. íŒŒì´í”„ ì´ë™ ë° ì¶©ëŒ ê°ì§€
            const pipes = document.querySelectorAll('.pipe');
            const charRect = character.getBoundingClientRect(); 

            pipes.forEach(pipe => {
                let pipeX = parseInt(pipe.style.left);
                pipeX -= PIPE_SPEED;
                pipe.style.left = pipeX + 'px';

                // í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ë©´ ì œê±°
                if (pipeX < -pipe.clientWidth) {
                    pipe.remove();
                    return;
                }

                const pipeRect = pipe.getBoundingClientRect();

                // 5. ì¶©ëŒ ê°ì§€ (Bounding Box)
                if (
                    charRect.right > pipeRect.left &&
                    charRect.left < pipeRect.right &&
                    charRect.bottom > pipeRect.top &&
                    charRect.top < pipeRect.bottom
                ) {
                    gameOver();
                }

                // 6. ì ìˆ˜ íšë“
                if (pipeX + pipe.clientWidth < character.offsetLeft && !pipe.dataset.scored) {
                    score++;
                    scoreDisplay.textContent = score;
                    pipe.dataset.scored = true; 
                }
            });
        }

        /** ìƒˆë¡œìš´ íŒŒì´í”„ ì„¸íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ */
        function createPipe() {
            if (isGameOver) return;

            const gameHeight = gameContainer.clientHeight;
            const maxTopPipeHeight = gameHeight - PIPE_GAP - 50; 
            
            const topPipeHeight = Math.floor(Math.random() * (maxTopPipeHeight - 30)) + 30; // 30px ~ maxTopPipeHeight
            const bottomPipeHeight = gameHeight - topPipeHeight - PIPE_GAP;

            // ìœ„ìª½ íŒŒì´í”„ ìƒì„±
            const topPipe = document.createElement('div');
            topPipe.classList.add('pipe', 'top-pipe');
            topPipe.style.height = topPipeHeight + 'px';
            topPipe.style.left = gameContainer.clientWidth + 'px'; 

            // ì•„ë˜ìª½ íŒŒì´í”„ ìƒì„±
            const bottomPipe = document.createElement('div');
            bottomPipe.classList.add('pipe', 'bottom-pipe');
            bottomPipe.style.height = bottomPipeHeight + 'px';
            bottomPipe.style.left = gameContainer.clientWidth + 'px';

            gameContainer.appendChild(topPipe);
            gameContainer.appendChild(bottomPipe);
        }

        /** ê²Œì„ ì˜¤ë²„ ì²˜ë¦¬ */
        function gameOver() {
            isGameOver = true;
            clearInterval(gameLoopInterval);
            clearInterval(pipeGenerationInterval);

            // ìºë¦­í„°ë¥¼ ë•…ì— ë‹¿ì€ ê²ƒì²˜ëŸ¼ ê³ ì •
            character.style.top = `${gameContainer.clientHeight - character.clientHeight}px`; 
            character.style.transform = `rotate(90deg)`; // ì¶©ëŒ ì‹œ íšŒì „

            finalScoreDisplay.textContent = `ì ìˆ˜: ${score}`;
            gameOverScreen.style.display = 'block';
        }

        /** ê²Œì„ ì‹œì‘ */
        function startGame() {
            // ì´ì „ íŒŒì´í”„ ì œê±°
            document.querySelectorAll('.pipe').forEach(pipe => pipe.remove());
            
            charY = 240;
            charVelocity = 0;
            score = 0;
            scoreDisplay.textContent = '0';
            isGameOver = false;
            gameOverScreen.style.display = 'none';
            character.style.transform = `translateY(${charY}px) rotate(0deg)`;

            // ê²Œì„ ë£¨í”„ ì‹œì‘ (60 FPS)
            gameLoopInterval = setInterval(gameLoop, 1000 / 60); 

            // íŒŒì´í”„ ìƒì„± ì‹œì‘
            pipeGenerationInterval = setInterval(createPipe, PIPE_INTERVAL);
        }

        // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---

        // ìŠ¤í˜ì´ìŠ¤ë°” ë˜ëŠ” í™”ë©´ í´ë¦­/í„°ì¹˜ë¡œ ì í”„
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.key === ' ') {
                e.preventDefault(); // ìŠ¤í¬ë¡¤ ë°©ì§€
                jump();
            }
        });
        document.addEventListener('click', jump);
        document.addEventListener('touchstart', jump); 

        // ê²Œì„ ì‹œì‘
        startGame();
        // JavaScript ë
    </script>
</body>
</html>
